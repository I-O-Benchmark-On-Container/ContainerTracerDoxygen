<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ContainerTracer: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ContainerTracer
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ContainerTracer Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://user-images.githubusercontent.com/16631264/90947085-177fac00-e46e-11ea-8ccc-3f14e214d39a.png"/>
</div>
<p><a href="https://www.codacy.com/gh/I-O-Benchmark-On-Container/ContainerTracer?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=I-O-Benchmark-On-Container/ContainerTracer&amp;amp;utm_campaign=Badge_Grade"></a> <a href="https://travis-ci.org/I-O-Benchmark-On-Container/ContainerTracer"></a> </p>
<p><a href="https://github.com/I-O-Benchmark-On-Container/ContainerTracer/blob/master/documentation/README-KOR.md">한국어 링크</a> </p>
<h1>Introduction</h1>
<p>Container Tracer is a tool that measures I/O performance per container. This program complements lacks of cgroup and container building sequence the existing I/O performance measurement program like fio and filebench.</p>
<p>Currently, Container Tracer uses <a href="https://github.com/yongseokoh/trace-replay">trace-replay</a> to measure the I/O performance of each container.</p>
<h1>Recommended system requirements</h1>
<p>This program can run on the system which follows the POSIX standards.</p>
<p>But in these documents and our testing was based on the system which is described in the following table.</p>
<p>So, when you build and run this program you have to care about this information.</p>
<table class="doxtable">
<tr>
<th align="center">item </th><th align="center">content  </th></tr>
<tr>
<td align="center">Operting System </td><td align="center">Ubuntu 18.04 </td></tr>
<tr>
<td align="center">Kernel </td><td align="center">linux 4.19 </td></tr>
</table>
<h1>Project Components</h1>
<p>The composition of the project is as follows.</p>
<ul>
<li><b>trace-replay:</b> <a href="https://github.com/yongseokoh/trace-replay">trace-replay</a> which reconstructed to produce the formatted data to message queue or shared memory. (language: C)</li>
<li><b>runner:</b> Assign benchmark program to each container. (language: C)</li>
<li><b>web:</b> Developed based on Flask, which output the value from runner produces. (language: Python)</li>
<li><b>setting</b>: The directory which contains Scons' build global configuration</li>
<li><b>include</b>: The directory has C program's header. Almost all C program's header must be located in this place.</li>
</ul>
<p><code>runner</code> directory subdirectory <code>test</code> has unit-test program of each driver of runner.</p>
<h2>Implementation</h2>
<p>You have to check <a href="https://i-o-benchmark-on-container.github.io/ContainerTracerDoxygen/">this link</a></p>
<h1>Building</h1>
<p>In common, you must do the following.</p>
<div class="fragment"><div class="line">sudo pip3 install black flake8</div><div class="line">sudo apt install doxygen</div></div><!-- fragment --><h2>web</h2>
<p>Since we are using Flask, you must install Flask and install the related package first.</p>
<div class="fragment"><div class="line">sudo pip3 install flask flask_restful flask_socketio</div></div><!-- fragment --><p>And you can run this program with the following command in the project root directory.</p>
<div class="fragment"><div class="line">sudo python web/run.py</div></div><!-- fragment --><p>You can get more information from this <a href="https://github.com/I-O-Benchmark-On-Container/ContainerTracer/wiki/8.-How-to-run-the-%60web%60-program">link</a>.</p>
<h2>trace-replay and runner</h2>
<p>You download the source code and install necessary programs and libraries following.</p>
<div class="fragment"><div class="line">sudo pip3 install scons scons-compiledb</div><div class="line">sudo pip3 install clang-format</div><div class="line">sudo apt install cppcheck libaio-dev libjson-c-dev libjemalloc-dev</div></div><!-- fragment --><p>If you want to build by <code>clang</code> compiler then you must change the <code>SConstruct</code> file's <code>CC</code> section' <code>gcc</code> to <code>clang</code> and follow like below.</p>
<div class="fragment"><div class="line">sudo apt install llvm-6.0 clang-6.0 libclang-6.0-dev</div><div class="line">sudo ln -s /usr/bin/clang-6.0 /usr/bin/clang</div></div><!-- fragment --><p>Based on the following commands you do the build and unit testing. This execution results are stored in <code>./build/debug</code>.</p>
<div class="fragment"><div class="line">sudo scons -c</div><div class="line">sudo scons test DEBUG=True</div></div><!-- fragment --><p>If you want to build the release mode then you do the following. This execution results are stored in <code>./build/release</code></p>
<div class="fragment"><div class="line">sudo scons -c</div><div class="line">scons</div></div><!-- fragment --><p>Moreover, you can install the release mode of runner libraries by following commands. If you want to install the debug mode then just change the <code>sudo scons install</code> to <code>sudo scons DEBUG=True install</code></p>
<div class="fragment"><div class="line">sudo scons install</div><div class="line">sudo ldconfig</div></div><!-- fragment --><p>Additionally, you can get information about how to make the driver program of the runner from <a href="https://github.com/I-O-Benchmark-On-Container/ContainerTracer/wiki/4.-How-to-add-the-driver-to-Runner">this link</a></p>
<h3>Notes</h3>
<ul>
<li><code>DEBUG=True</code> enables us to print all information about debugging. This expects to be made you to easily debug our program.</li>
<li>Because <code>trace-replay</code> needs the superuser privileges, you must run this program with superuser privileges.</li>
<li><code>sudo scons test</code> doesn't make a <code>compile_commands.json</code> file. So, if you want to generate that file then must only do <code>scons</code>.</li>
</ul>
<h3>Warning</h3>
<ol type="1">
<li>Because the <code>trace-replay</code> does direct-IO, this may be destructing your disk's file system. So, you must run this program under an empty disk or virtual disk.</li>
<li>You must follow the init JSON contents must be <code>{"driver": "&lt;DRIVER-NAME&gt;", "setting": {...}}</code>. And <code>setting</code> field has driver dependant contents.</li>
</ol>
<h1>Libraries</h1>
<ol type="1">
<li>pthread: POSIX thread library for trace-replay</li>
<li>AIO: asynchronous I/O library</li>
<li>rt: Real-Time library</li>
<li><a href="https://github.com/json-c/json-c">json-c</a>: Json library for C language</li>
<li><a href="https://github.com/ThrowTheSwitch/Unity">unity</a>: Unit test library for C language</li>
<li><a href="https://github.com/jemalloc/jemalloc">jemalloc</a>: A library which does the efficient memory dynamic allocation.</li>
</ol>
<h1>Contributing</h1>
<p>You must follow the contributing rules in https://github.com/I-O-Benchmark-On-Container/ContainerTracer/blob/master/CONTRIBUTING.md "this link". </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
